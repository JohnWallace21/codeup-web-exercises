<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Map Project</title>
    <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">-->
    <style>
        body{
            background-color: #b4dbfa;
        }

        div{
            border: 1px solid black;
            float: left;
            clear: right;
            text-align: center;
            background-color: #f2f2f2;
        }
        button{
            clear: left;
        }
        #map-canvas {
            width: 400px;
            height: 400px;
        }
    </style>
</head>
<body>
<h1>Weather Application</h1>
<h2 id ="city"></h2>
<container id = "bx">
<div  id = "day1"></div>
<div id = "day2"></div>
<div id = "day3"></div>
</container>
<br>
<button type = "button">Change Location</button>
<input type="number" placeholder="latitude" id = "lati" step = "any">
<input type="number" placeholder="longitude" id ="long" step = "any" >
<br>
<div id="map-canvas"></div>

<script src="js/jquery-2.2.4.js"></script>

<script>


 var request = $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
            APPID: "8f32c0149a278cdb5f995fbb3d98eba5",
            lat: 29.423017,
            lon: -98.48527,
            units: "imperial",
            cnt: 3
        });

        request.done(function (response) {
            console.log(response);
            console.log(response.list);
        });
        // request.done(function(data){
        //     data.each(function(thing){
        //         $("#wm").append("<h2>" + data.main.name + "</h2>"
        //             );
        //
        //     });
        // });
        request.done(function (response) {
            $("#city").append(response.city.name )
        });

        request.done(function (response) {
            $("#day1").append("<h3>" + response.list[0].temp.min + "/" + response.list[0].temp.max + "°</h3>",
                "<img src='http://openweathermap.org/img/w/" + [response.list[0].weather[0].icon] + ".png'>",
                "<p>" + "Clouds: " + response.list[0].weather[0].description + "</p>",
                "<p>" + "Humidity: " + response.list[0].humidity + "</p>",
                "<p>" + "Wind: " + response.list[0].speed + "</p>",
                "<p>" + "Pressure: " + response.list[0].pressure + "</p>"
            );
        });
        request.done(function (response) {
            $("#day2").append("<h3>" + response.list[1].temp.min + "/" + response.list[0].temp.max + "</h3>",
                "<img src='http://openweathermap.org/img/w/" + [response.list[1].weather[0].icon] + ".png'>",
                "<p>" + "Clouds: " + response.list[1].weather[0].description + "</p>",
                "<p>" + "Humidity: " + response.list[1].humidity + "</p>",
                "<p>" + "Wind: " + response.list[1].speed + "</p>",
                "<p>" + "Pressure: " + response.list[1].pressure + "</p>"
            );
        });
        request.done(function (response) {
            $("#day3").append("<h3>" + response.list[2].temp.min + "/" + response.list[0].temp.max + "</h3>",
                "<img src='http://openweathermap.org/img/w/" + [response.list[2].weather[0].icon] + ".png'>",
                "<p>" + "Clouds: " + response.list[2].weather[0].description + "</p>",
                "<p>" + "Humidity: " + response.list[2].humidity + "</p>",
                "<p>" + "Wind: " + response.list[2].speed + "</p>",
                "<p>" + "Pressure: " + response.list[2].pressure + "</p>"
            );
        });
 $("button").click(function() {

     $("#city").empty();
      $("#day1").empty();
      $("#day2").empty();
      $("#day3").empty();

      var latitiude = $("#lati").val();
      var longitude = $("#long").val();

     var request = $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
         APPID: "8f32c0149a278cdb5f995fbb3d98eba5",
         lat: latitiude,
         lon: longitude,
         units: "imperial",
         cnt: 3
     });

     request.done(function (response) {
         console.log(response);
         console.log(response.list);
     });
     // request.done(function(data){
     //     data.each(function(thing){
     //         $("#wm").append("<h2>" + data.main.name + "</h2>"
     //             );
     //
     //     });
     // });
     request.done(function (response) {
         $("#city").append( response.city.name )
     });

     request.done(function (response) {
         $("#day1").append("<h3>" + response.list[0].temp.min + "/" + response.list[0].temp.max + "°</h3>",
             "<img src='http://openweathermap.org/img/w/" + [response.list[0].weather[0].icon] + ".png'>",
             "<p>" + "Clouds: " + response.list[0].weather[0].description + "</p>",
             "<p>" + "Humidity: " + response.list[0].humidity + "</p>",
             "<p>" + "Wind: " + response.list[0].speed + "</p>",
             "<p>" + "Pressure: " + response.list[0].pressure + "</p>"
         );
     });
     request.done(function (response) {
         $("#day2").append("<h3>" + response.list[1].temp.min + "/" + response.list[0].temp.max + "</h3>",
             "<img src='http://openweathermap.org/img/w/" + [response.list[1].weather[0].icon] + ".png'>",
             "<p>" + "Clouds: " + response.list[1].weather[0].description + "</p>",
             "<p>" + "Humidity: " + response.list[1].humidity + "</p>",
             "<p>" + "Wind: " + response.list[1].speed + "</p>",
             "<p>" + "Pressure: " + response.list[1].pressure + "</p>"
         );
     });
     request.done(function (response) {
         $("#day3").append("<h3>" + response.list[2].temp.min + "/" + response.list[0].temp.max + "</h3>",
             "<img src='http://openweathermap.org/img/w/" + [response.list[2].weather[0].icon] + ".png'>",
             "<p>" + "Clouds: " + response.list[2].weather[0].description + "</p>",
             "<p>" + "Humidity: " + response.list[2].humidity + "</p>",
             "<p>" + "Wind: " + response.list[2].speed + "</p>",
             "<p>" + "Pressure: " + response.list[2].pressure + "</p>"
         );
     });
 });



</script>
<script  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA2l-5CY-2Ds6dIyc8doaPHImwacbive3A"></script>
<script
<!-- Script to show address on map -->
<script type="text/javascript">

    var mapOptions = {
        zoom: 19,
        center: {
            lat: 29.426791,
            lng: -98.489602
        },
        mapTypeId: google.maps.MapTypeId.HYBRID
    };
    var mapCanvas = document.getElementById('map-canvas');
    var map = new google.maps.Map(mapCanvas, mapOptions);
    var geocoder = new google.maps.Geocoder();
    /*var address = {
        address: "300 Alamo Plaza, San Antonio, TX, 78205"
    };*/
    function callback(results, status, restaurant) {
        if (status === google.maps.GeocoderStatus.OK) {
            // Recenter the map over the address
            // results[0].geometry.location will contain an object with lat and lng
            // setter method
            map.setCenter(results[0].geometry.location);
            map.setMapTypeId(google.maps.MapTypeId.SATELLITE);
            map.setZoom(10);
            var marker = new google.maps.Marker({
                position: results[0].geometry.location,
                map: map,
                icon: "imgs/codeup-arrow.png",
                animation: google.maps.Animation.DROP,
            });
            var info = new google.maps.InfoWindow({
                content: restaurant.info
            });
            info.open(map, marker);
        } else {
            // Show an error message with the status if our request fails
            alert("Geocoding was not successful - STATUS: " + status);
        }
    }
    var restaurants = [
        {
            address: "9921 Frontage Rd, San Antonio, TX 78230",
            info: "Info 1"
        },
        {
            address: "22410 US Hwy 281 N, San Antonio, TX 78259",
            info: "Info 2"
        },
        {
            address: "849 E Commerce St, San Antonio TX, 78205",
            info: "Info 3"
        }
    ];
    // setInterval, instead of foreach
    restaurants.forEach(function (restaurant, index, array) {
        geocoder.geocode({address: restaurant.address}, function (results, status) {
            console.log(restaurant);
            callback(results, status, restaurant);
        });
    });

</script>

        </body>

    </html>